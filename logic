import re

def build_intent_classifier():
    """
    Returns a callable that classifies a query into one of the 6 intents using regex.
    Usage:
        classify_intent = build_intent_classifier()
        intent = classify_intent("Compare versions 3.0.0 and v6.0.89")
    """
    # Patterns for each intent
    intent_patterns = {
        "analyze_latest": [
            r"\banalyze\b.*\blatest\b",
            r"\blatest\b.*\banalyze\b",
        ],
        "compare_versions": [
            r"\bcompare\b.*\bversions?\b",
            r"\bversions?\b.*\bcompare\b",
        ],
        "compare_standards": [
            r"\bcompare\b.*\bstandards?\b",
            r"\bstandards?\b.*\bcompare\b",
        ],
        "compare_standard_versions": [
            r"\bcompare\b.*\bstandard\b.*\bversions?\b",
            r"\bstandard\b.*\bversions?\b.*\bcompare\b",
        ],
        "explain_features": [
            r"\bexplain\b.*\bfeatures?\b",
            r"\bfeatures?\b.*\bexplain\b",
        ],
        "latest_standard": [
            r"\blatest\b.*\bstandard\b",
            r"\bstandard\b.*\blatest\b",
        ],
    }

    def classify_intent(query: str) -> str:
        query_lower = query.lower()
        for intent, patterns in intent_patterns.items():
            for pattern in patterns:
                if re.search(pattern, query_lower):
                    return intent
        return "none"

    return classify_intent
